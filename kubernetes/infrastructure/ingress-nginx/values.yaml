# Ingress NGINX Helm Chart Values
# Install: helm install ingress-nginx ingress-nginx/ingress-nginx -n ingress-nginx --create-namespace -f values.yaml

controller:
  replicaCount: 2

  service:
    annotations:
      # AWS Load Balancer Controller annotations
      service.beta.kubernetes.io/aws-load-balancer-type: "nlb"
      service.beta.kubernetes.io/aws-load-balancer-cross-zone-load-balancing-enabled: "true"
      service.beta.kubernetes.io/aws-load-balancer-backend-protocol: "tcp"
      service.beta.kubernetes.io/aws-load-balancer-nlb-target-type: "ip"

    externalTrafficPolicy: Local

  metrics:
    enabled: true
    serviceMonitor:
      enabled: false  # Enable after installing Prometheus Operator
      additionalLabels:
        release: prometheus

  resources:
    requests:
      cpu: 100m
      memory: 128Mi
    limits:
      cpu: 500m
      memory: 512Mi

  autoscaling:
    enabled: true
    minReplicas: 2
    maxReplicas: 10
    targetCPUUtilizationPercentage: 80
    targetMemoryUtilizationPercentage: 80

  config:
    # Custom configuration
    use-forwarded-headers: "true"
    compute-full-forwarded-for: "true"
    use-proxy-protocol: "false"

  admissionWebhooks:
    enabled: true

defaultBackend:
  enabled: true
  replicaCount: 2